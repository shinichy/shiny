/* ***** BEGIN LICENSE BLOCK *****
 * Distributed under the BSD license:
 *
 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * ***** END LICENSE BLOCK ***** */

define(["require","exports","module"],function(e,t,n){var r=t.SyntaxHighlighter=function(e,t){var n=["after","ancestor","ancestor-or-self","and","as","ascending","attribute","before","case","cast","castable","child","collation","comment","copy","count","declare","default","delete","descendant","descendant-or-self","descending","div","document","document-node","element","else","empty","empty-sequence","end","eq","every","except","first","following","following-sibling","for","function","ge","group","gt","idiv","if","then","import","insert","instance","intersect","into","is","item","last","le","let","lt","mod","modify","module","namespace","namespace-node","ne","node","only","or","order","ordered","parent","preceding","preceding-sibling","processing-instruction","rename","replace","return","satisfies","schema-attribute","schema-element","self","some","stable","start","switch","text","to","treat","try","typeswitch","union","unordered","validate","where","with","xquery","contains","paragraphs","sentences","times","words","by","collection","allowing","at","base-uri","boundary-space","break","catch","construction","context","continue","copy-namespaces","decimal-format","encoding","exit","external","ft-option","in","index","integrity","lax","nodes","option","ordering","revalidation","schema","score","sliding","strict","tumbling","type","updating","value","variable","version","while","constraint","loop","returning","append","array","json-item","object","structured-item","when","next","previous","window"],r=["cdata","comment","tag"],i={lines:[[]],states:[]};this.getTokens=function(){return this.visit(t),i},this.addTokens=function(e,t){var n=e.split("\n"),s="start";for(var o in n){o>0&&(i.lines.push([]),i.states.push(s));var e=n[o],u=i.lines.length-1,a=i.lines[u];a.push({value:e,type:t}),s=r.indexOf(t)!=-1?t:"start"}},this.getNodeValue=function(t){return e.substring(t.begin,t.end)},this.DirPIConstructor=function(e){var t=this.getNodeValue(e);return this.addTokens(t,"xml_pe"),!0},this.DirElemConstructor=function(e){for(var t in e.children){var n=e.children[t];if(n.name==="TOKEN"||n.name==="QName"){var r=this.getNodeValue(n);this.addTokens(r,"meta.tag")}else this.visit(n)}return!0},this.DirAttributeList=function(e){for(var t in e.children){var n=e.children[t];if(n.name==="QName"){var r=this.getNodeValue(n);this.addTokens(r,"meta.tag")}else this.visit(n)}return!0},this.DirAttributeValue=function(e){for(var t in e.children){var n=e.children[t];if(n.name==="TOKEN"){var r=this.getNodeValue(n);this.addTokens(r,"string")}else this.visit(n)}return!0},this.QuotAttrContentChar=function(e){var t=this.getNodeValue(e);return this.addTokens(t,"string"),!0},this.StringConcatExpr=function(e){for(var t in e.children){var n=e.children[t];if(n.name==="TOKEN"){var r=this.getNodeValue(n);this.addTokens(r,"keyword.operator")}else this.visit(n)}return!0},this.AdditiveExpr=function(e){for(var t in e.children){var n=e.children[t];if(n.name==="TOKEN"){var r=this.getNodeValue(n);this.addTokens(r,"keyword.operator")}else this.visit(n)}return!0},this.MultiplicativeExpr=function(e){for(var t in e.children){var n=e.children[t];if(n.name==="TOKEN"){var r=this.getNodeValue(n);this.addTokens(r,"keyword.operator")}else this.visit(n)}return!0},this.UnaryExpr=function(e){for(var t in e.children){var n=e.children[t];if(n.name==="TOKEN"){var r=this.getNodeValue(n);this.addTokens(r,"keyword.operator")}else this.visit(n)}return!0},this.GeneralComp=function(e){for(var t in e.children){var n=e.children[t];if(n.name==="TOKEN"){var r=this.getNodeValue(n);this.addTokens(r,"keyword.operator")}else this.visit(n)}return!0},this.NumericLiteral=function(e){for(var t in e.children){var n=e.children[t];if(n.name!="TEXT"){var r=this.getNodeValue(n);this.addTokens(r,"constant")}else this.visit(n)}return!0},this.DirCommentConstructor=function(e){for(var t in e.children){var n=e.children[t];if(n.name!="TEXT"){var r=this.getNodeValue(n);this.addTokens(r,"comment")}else this.visit(n)}return!0},this.Comment=function(e){return!0},this.URILiteral=function(e){var t=this.getNodeValue(e);return this.addTokens(t,"string"),!0},this.StringLiteral=function(e){var t=this.getNodeValue(e);return this.addTokens(t,"string"),!0},this.EQName=function(e){var t=this.getNodeValue(e);return this.addTokens(t,"support.function"),!0},this.TOKEN=function(e){var t=this.getNodeValue(e);return n.indexOf(t)>-1?this.addTokens(t,"keyword"):t!=="$"&&this.addTokens(t,"text"),!0},this.WS=function(e){var t=this.getNodeValue(e),n=t.indexOf("(:");while(n>-1){var r=t.substring(0,n);this.addTokens(r,"text");var i=t.substring(n).indexOf(":)")+3,s=t.substring(n,i);this.addTokens(s,"comment"),t=t.substring(i),n=t.indexOf("(:")}this.addTokens(t,"text")},this.EverythingElse=function(e){if(e.children.length===0){var t=this.getNodeValue(e);return this.addTokens(t,"text"),!0}return!1},this.visit=function(e){var t=e.name,n=!1;typeof this[t]=="function"?n=this[t](e)===!0?!0:!1:n=this.EverythingElse(e)===!0?!0:!1;if(!n&&typeof e.children=="object"){var r=!1;for(var i=0;i<e.children.length;i++){var s=e.children[i],o=this.getNodeValue(s);s.name==="TOKEN"&&o==="$"?r=!0:r?(this.addTokens("$"+o,"variable"),r=!1):this.visit(s)}}}}});